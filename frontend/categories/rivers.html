<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Rivers of India | AI Powered Guide</title>

  <link rel="stylesheet" href="../css/styles.css" />
  <style>
    :root {
      --brand:#1565c0;
      --brand-2:#1976d2;
      --ink:#2c3e50;
      --paper:#ffffff;
      --bg:#f7f9fb;
    }
    body {
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
      margin: 0; padding: 0;
      color: #333; background: var(--bg);
    }
    h1 { text-align: center; padding: 20px; margin: 0; }
    p.lead { text-align: center; max-width: 800px; margin: 0 auto 20px; }

    .button-container { text-align: center; margin: 20px 0; }
    .category-btn {
      margin: 6px; padding: 10px 16px;
      background: var(--brand); color:#fff;
      border:none; border-radius:8px;
      cursor:pointer; font-weight:600;
    }
    .category-btn:hover { background: var(--brand-2); }

    .content-card {
      display:none; max-width:900px; margin:20px auto;
      padding:20px; border-radius:10px;
      background:#fff; box-shadow:0 4px 10px rgba(0,0,0,.1);
    }
    .content-card.active { display:block; }

    .place img {
      max-width:500px; width:100%; height:250px;
      object-fit:cover; border-radius:10px; margin-bottom:10px;
    }

    /* Chatbot */
    #chatbot-toggle {
      position: fixed; bottom:30px; right:30px;
      width:54px; height:54px;
      border-radius:50%; border:none;
      background: var(--brand); color:#fff;
      font-size:24px; cursor:pointer;
      display:flex; align-items:center; justify-content:center;
      box-shadow:0 4px 12px rgba(0,0,0,.2);
      z-index:9999;
    }
    #chatbot-box {
      position: fixed; bottom:100px; right:30px;
      width:340px; background:#fff;
      border-radius:10px; box-shadow:0 6px 20px rgba(0,0,0,.2);
      display:none; flex-direction:column;
      overflow:hidden; z-index:10000;
    }
    #chatbot-box.show { display:flex; }
    #chatbot-header {
      background: var(--brand); color:#fff;
      padding:10px; display:flex; justify-content:space-between;
    }
    #chatbot-messages {
      height:180px; overflow-y:auto; padding:10px;
      background:#f7f9fb; font-size:14px;
    }
    #chatbot-controls { display:flex; padding:10px; border-top:1px solid #ddd; }
    #chatbot-input {
      flex:1; padding:6px; border:1px solid #ccc; border-radius:6px;
    }
    #chatbot-send {
      margin-left:8px; background: var(--brand);
      color:#fff; border:none; padding:6px 12px; border-radius:6px; cursor:pointer;
    }
  </style>
</head>
<body>
  <div class="container">
    <h1>Rivers of India</h1>
    <p class="lead">India‚Äôs rivers are lifelines of culture, economy, and ecology, flowing across diverse landscapes and nourishing civilizations.</p>

    <div class="button-container">
      <button class="category-btn" onclick="showContent('ganga')">Ganga</button>
      <button class="category-btn" onclick="showContent('yamuna')">Yamuna</button>
      <button class="category-btn" onclick="showContent('brahmaputra')">Brahmaputra</button>
      <button class="category-btn" onclick="showContent('godavari')">Godavari</button>
      <button class="category-btn" onclick="showContent('narmada')">Narmada</button>
    </div>

    <!-- Ganga -->
    <div id="ganga" class="content-card">
      <div class="place">
        <img src="https://upload.wikimedia.org/wikipedia/commons/4/49/Varanasi_Ganga.jpg" alt="Ganga at Varanasi">
        <div class="card-body">
          <h3>Ganga River</h3>
          <p>The Ganga, originating from the Gangotri Glacier in Uttarakhand, is India‚Äôs most sacred river, revered as ‚ÄúGanga Maa.‚Äù Flowing through Uttar Pradesh, Bihar, Jharkhand, and West Bengal before emptying into the Bay of Bengal, it supports hundreds of millions of people with irrigation, drinking water, and transportation. Varanasi, Haridwar, and Prayagraj are major cultural centers on its banks. Despite challenges of pollution, the Ganga remains central to India‚Äôs spirituality, ecology, and economy, and is the focus of major conservation efforts like the Namami Gange program.</p>
        </div>
      </div>
    </div>

    <!-- Yamuna -->
    <div id="yamuna" class="content-card">
      <div class="place">
        <img src="https://upload.wikimedia.org/wikipedia/commons/3/3f/Yamuna_agra.jpg" alt="Yamuna near Agra">
        <div class="card-body">
          <h3>Yamuna River</h3>
          <p>The Yamuna, a major tributary of the Ganga, originates from Yamunotri Glacier in Uttarakhand. Flowing through Delhi, Haryana, and Uttar Pradesh, it is vital for agriculture, industries, and drinking water supply to the capital region. The Taj Mahal stands on its banks at Agra. While heavily polluted near urban areas, it remains ecologically and culturally important, celebrated in Hindu epics and traditions.</p>
        </div>
      </div>
    </div>

    <!-- Brahmaputra -->
    <div id="brahmaputra" class="content-card">
      <div class="place">
        <img src="https://upload.wikimedia.org/wikipedia/commons/6/6b/Brahmaputra_river_in_Assam.jpg" alt="Brahmaputra in Assam">
        <div class="card-body">
          <h3>Brahmaputra River</h3>
          <p>Originating as the Yarlung Tsangpo in Tibet, the Brahmaputra enters India through Arunachal Pradesh, flows through Assam, and joins the Ganga in Bangladesh. Known for its vast width and seasonal floods, it sustains the fertile plains of Assam and supports biodiversity, including the Kaziranga National Park. Its hydroelectric potential and navigability make it a key economic asset.</p>
        </div>
      </div>
    </div>

    <!-- Godavari -->
    <div id="godavari" class="content-card">
      <div class="place">
        <img src="https://upload.wikimedia.org/wikipedia/commons/e/e5/Godavari_River%2C_Nanded.jpg" alt="Godavari at Nanded">
        <div class="card-body">
          <h3>Godavari River</h3>
          <p>The Godavari, often called the ‚ÄúDakshina Ganga‚Äù (Ganga of the South), is the second longest river in India. It rises in Maharashtra and flows through Telangana, Andhra Pradesh, and Odisha before merging with the Bay of Bengal. Known for its fertile delta, it sustains agriculture and aquaculture. Important pilgrimage sites like Nashik and Rajahmundry lie along its banks.</p>
        </div>
      </div>
    </div>

    <!-- Narmada -->
    <div id="narmada" class="content-card">
      <div class="place">
        <img src="https://upload.wikimedia.org/wikipedia/commons/0/00/Narmada_river_near_Maheshwar.jpg" alt="Narmada near Maheshwar">
        <div class="card-body">
          <h3>Narmada River</h3>
          <p>The Narmada, originating from Amarkantak Plateau in Madhya Pradesh, flows westward across Madhya Pradesh, Maharashtra, and Gujarat, emptying into the Arabian Sea. Known as one of the few west-flowing rivers in India, it forms the picturesque Marble Rocks gorge at Bhedaghat and sustains major dams like Sardar Sarovar. It holds deep cultural and ecological significance.</p>
        </div>
      </div>
    </div>
  </div>

  <!-- Chatbot -->
  <button id="chatbot-toggle" onclick="toggleChatbot()">üí¨</button>
  <div id="chatbot-box">
    <div id="chatbot-header">
      AI Chatbot
      <span style="cursor:pointer;" onclick="toggleChatbot()">‚úñ</span>
    </div>
    <div id="chatbot-messages"></div>
    <div id="chatbot-controls">
      <input type="text" id="chatbot-input" placeholder="Ask about rivers...">
      <button id="chatbot-send">Send</button>
    </div>
  </div>

  <script>
  // Default content
  document.addEventListener("DOMContentLoaded", () => showContent('ganga'));

  function showContent(id) {
    document.querySelectorAll('.content-card').forEach(c => c.style.display='none');
    document.getElementById(id).style.display='block';
  }

  // Chatbot toggle
  function toggleChatbot() {
    document.getElementById("chatbot-box").classList.toggle("show");
  }

  // Rivers context
  const riverPlaces = {
    "North": ["Ganga", "Yamuna", "Brahmaputra"],
    "South": ["Godavari", "Krishna", "Kaveri"],
    "West": ["Narmada", "Tapi"]
  };

  function isRiverQuery(userMessage) {
    const keywords = ["river", "ganga", "yamuna", "brahmaputra", "godavari", "narmada", "water", "tributary"];
    return keywords.some(k => userMessage.toLowerCase().includes(k));
  }

  function buildPrompt(userMessage) {
    let context = "Answer only based on Rivers of India:\n";
    for (const [cat, items] of Object.entries(riverPlaces)) {
      context += `- ${cat}: ${items.join(", ")}\n`;
    }
    context += `\nQuestion: ${userMessage}\nAnswer:`;
    return context;
  }

  // Chatbot send logic
  document.getElementById("chatbot-send").addEventListener("click", sendMessage);
  document.getElementById("chatbot-input").addEventListener("keypress", (e) => {
    if (e.key === "Enter") sendMessage();
  });

  async function sendMessage() {
    const input = document.getElementById("chatbot-input");
    const msg = input.value.trim();
    if (!msg) return;

    const chat = document.getElementById("chatbot-messages");
    chat.innerHTML += `<div><b>You:</b> ${msg}</div>`;

    let payload;
    if (isRiverQuery(msg)) {
      payload = { message: buildPrompt(msg) };
    } else {
      payload = { message: msg };
    }

    try {
      const response = await fetch("http://localhost:5000/api/chat", {
        method: "POST",
        headers: { "Content-Type": "application/json" },
        body: JSON.stringify(payload),
      });

      const data = await response.json();
      chat.innerHTML += `<div><b>Bot:</b> ${data.reply}</div>`;
    } catch (err) {
      chat.innerHTML += `<div><b>Bot:</b> ‚ö†Ô∏è Could not connect to server.</div>`;
    }

    input.value = "";
    chat.scrollTop = chat.scrollHeight;
  }
  </script>
  <script src="js/bookmark.js"></script>
  <script src="js/search.js"></script>

</body>
</html>
